# 目录结构

```js
├── api
├── components
├── router
├── views
├── store
	├── action.js
	├── getter.js
	├── index.js
	├── mutations.js
	├── plugins.js
	├── state.js
	└── modules
		├── moduleA
			├── action.js
			├── getter.js
			├── index.js
			└── mutations.js
		├── moduleB
		·········
		├── moduleN
		└── index.js 
├── App.vue
└── main.js
```
- /store/index.js：整个store的入口文件
- /store/modules/index.js：modules的入口文件

<br>

**/store/index.js**
```js
import Vue from "vue";
import Vuex from "vuex";
import state from "./state";
import getters from "./getters";
import actions from "./actions";
import mutations from "./mutations";
import plugins from "./plugins";
import modules from "./modules/index";

Vue.use(Vuex);

const debug = process.env.NODE_ENV !== "production";
const store = new Vuex.Store({
	strict: debug,
	state,
	getters,
	actions,
	mutations,
	plugins,
	modules
});

if (debug) {
     // 加载所有模块。
     const loadModules = () => {
	const context = require.context("./modules", false, /([a-z_]+)\.js$/i)
	const modules = context
		.keys()
		.map((key) => ({ key, name: key.match(/([a-z_]+)\.js$/i)[1] }))
		.reduce(
			(modules, { key, name }) => ({
				...modules,
				[name]: context(key).default
			}),
			{}
		)

	return { context, allModule: modules };
     };

     const { context, allModule } = loadModules();

     if (allModule.hot) {
	// 在任何模块发生改变时进行热重载。
	allModule.hot.accept(context.id, () => {
	    const { modules } = loadModules();
	    store.hotUpdate({
		modules
	    });
	});
     }
}

export default store;
```

**/store/plugins.js**
```js
import createLogger from "@plugin/store-logger";

const debug = process.env.NODE_ENV !== "production";

export default debug ? [createLogger()] : [];
```

**state.js\getter.js\mutations.js\action.js**
```js
export default {};

//或

export const test = () => {};
```

**/store/modules/index.js**
```js
import moduleA from "./moduleA/index";
import moduleB from "./moduleB/index";
import moduleN from "./moduleN/index";

export default {
	moduleA,
	moduleB,
	moduleN
};
```

