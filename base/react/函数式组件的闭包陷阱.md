> 使用react hook常发生的state拿不到最新值问题，本质是react函数组件带来的闭包导致的。


# 问题来源

话不多说，直接上代码描述被称为react hook闭包陷阱的问题：

```js
const [a, setA] = React.useState(1);
console.log("a_comp", a);

useEffect(() => {
  setA(2);

  setTimeout(() => {
    console.log("a", a);
  }, 1000);
}, []);
```

代码输出为：
```
a_comp 1
a_comp 2
a 1
```
